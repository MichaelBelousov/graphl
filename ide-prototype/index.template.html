<!doctype html>
<html lang="en" style="height: 100%;">
  <head>
    <meta charset="utf-8" />

    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Grappl Editor</title>
    <!-- TEMPLATE_HASH replaced by build.zig -->
    <script src="WebBackend.js?cache-buster=645b01301f0c87234741b81bbfddfe4db7d66bbe7c88069015cd2038a6ea51c2"></script>
  </head>

  <body style="height: 100%; margin: 0; padding: 0;" >
    <style>
        body {
          overflow-x: hidden;
          display: grid;
          grid-template-columns: 0 100vw 50vw;
          margin: 0;
          padding: 0;
        }
        #dvui-canvas {
          height: 100vh;
          display: block;
          outline: none;
          caret-color: transparent;
        }
        #react-app {
          height: 100vh;
        }
    </style>
    <!-- need tabIndex for the canvas to receive keydown/keyup/beforeinput events -->
    <canvas id="dvui-canvas" tabIndex="1"></canvas>
    <div id="react-app"></div>
    <script type="module" src="./index.tsx"></script>
    <script>
      document.body.onload = () => {
        dvui(
          "#dvui-canvas",
          "zig-out/bin/dvui-frontend.wasm?cache-buster=645b01301f0c87234741b81bbfddfe4db7d66bbe7c88069015cd2038a6ea51c2",
        );
      };

      const showText = "0 50vw 50vw";
      const noShowText = "0 100vw 50vw";

      document.addEventListener("keydown", (e) => {
        const isCtrlShiftE = e.ctrlKey && e.shiftKey && e.key === "E";
        if (!isCtrlShiftE) return;
        e.preventDefault();
        document.body.style["grid-template-columns"]
          = document.body.style["grid-template-columns"] === showText
          ? noShowText
          : showText;
      });
    </script>
  </body>
</html>
